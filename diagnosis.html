<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>말자람터 | 발달 진단 테스트</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'maljaram-primary': '#3B82F6', 
                        'maljaram-accent': '#10B981', 
                        'maljaram-warning': '#F59E0B',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; color: #1f2937; }
        .question-card {
            background-color: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 24px;
        }
        input[type="radio"]:checked + label {
            border-color: #3B82F6;
            background-color: #EFF6FF;
            color: #1D4ED8;
            font-weight: 600;
        }
        input[type="checkbox"]:checked + label {
            border-color: #10B981;
            background-color: #ECFDF5;
            color: #059669;
            font-weight: 600;
        }
        .result-box {
            animation: fadeIn 0.8s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">

    <!-- Navigation Bar (GNB) - 5개 메뉴 포함 -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20">
                <div class="flex-shrink-0 flex items-center">
                    <a href="/maljaram/index.html" class="text-2xl font-extrabold text-maljaram-primary tracking-tight">
                        말자람터 언어심리연구소
                    </a>
                </div>
                <!-- Desktop Menu -->
                <div class="hidden md:flex md:space-x-8 items-center">
                    <a href="/maljaram/about.html" class="text-gray-600 hover:text-maljaram-primary transition duration-300 font-medium p-2 rounded-lg">소개</a>
                    <a href="/maljaram/programs.html" class="text-gray-600 hover:text-maljaram-primary transition duration-300 font-medium p-2 rounded-lg">프로그램</a>
                    <a href="/maljaram/experts.html" class="text-gray-600 hover:text-maljaram-primary transition duration-300 font-medium p-2 rounded-lg">치유의 발자취</a>
                    <a href="/maljaram/announcements.html" class="text-gray-600 hover:text-maljaram-primary transition duration-300 font-medium p-2 rounded-lg">공지사항</a>
                    <a href="/maljaram/contact.html" class="px-5 py-2 text-sm font-semibold rounded-full text-white bg-maljaram-accent hover:bg-emerald-600 transition duration-300 shadow-md hover:shadow-lg">
                        1:1 상담/예약
                    </a>
                </div>
                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-maljaram-primary" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">메인 메뉴 열기</span>
                        <i class="fa-solid fa-bars h-6 w-6" id="menu-icon-open"></i>
                        <i class="fa-solid fa-xmark h-6 w-6 hidden" id="menu-icon-close"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu (Hidden by default) -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="/maljaram/about.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">소개</a>
                <a href="/maljaram/programs.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">프로그램</a>
                <a href="/maljaram/experts.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">치유의 발자취</a>
                <a href="/maljaram/announcements.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">공지사항</a>
                <a href="/maljaram/contact.html" class="block px-3 py-2 rounded-md text-base font-medium text-white bg-maljaram-primary text-center hover:bg-blue-700">1:1 상담/예약</a>
            </div>
        </div>
    </nav>

    <main class="flex-grow py-16">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-extrabold text-gray-900 mb-2">우리 아이 발달 자가 진단 테스트</h1>
                <p class="text-xl text-gray-600">3분 투자로 아이의 발달 고민을 객관적으로 점검해 보세요.</p>
            </div>

            <!-- Assessment Form -->
            <form id="assessment-form" onsubmit="event.preventDefault(); submitAssessment();">
                
                <!-- Q1: 연령대 (Radio) -->
                <div class="question-card">
                    <p class="text-lg font-bold mb-4 text-maljaram-primary">1. 아이의 현재 연령대는 어떻게 되나요? <span class="text-red-500">*</span></p>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                        <input type="radio" id="age-0-2" name="age" value="0-2" class="peer sr-only" required /><label for="age-0-2" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">0세 ~ 만 2세</label>
                        <input type="radio" id="age-3-5" name="age" value="3-5" class="peer sr-only" /><label for="age-3-5" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">만 3세 ~ 만 5세</label>
                        <input type="radio" id="age-6-8" name="age" value="6-8" class="peer sr-only" /><label for="age-6-8" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">만 6세 ~ 만 8세</label>
                        <input type="radio" id="age-9-12" name="age" value="9-12" class="peer sr-only" /><label for="age-9-12" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">만 9세 ~ 만 12세</label>
                        <input type="radio" id="age-13-19" name="age" value="13-19" class="peer sr-only" /><label for="age-13-19" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">만 13세 ~ 만 19세</label>
                    </div>
                </div>
                
                <!-- Q2: 주된 우려 영역 (Checkbox) - 이전에 논의된 구체적 항목-->
                <div class="question-card">
                    <p class="text-lg font-bold mb-4 text-maljaram-primary">2. 아이의 발달 중 **가장 우려되는 주된 영역**은 무엇인가요? (중복 선택 가능)<span class="text-red-500">*</span></p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <input type="checkbox" id="area-language" name="concernArea" value="언어 및 의사소통 발달" class="peer sr-only" /><label for="area-language" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition flex items-center"><i class="fa-solid fa-comments mr-2 text-maljaram-primary"></i> 언어 및 의사소통 발달 (말, 발음, 이해력)</label>
                        <input type="checkbox" id="area-social" name="concernArea" value="정서 및 사회성 발달" class="peer sr-only" /><label for="area-social" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition flex items-center"><i class="fa-solid fa-users mr-2 text-maljaram-primary"></i> 정서 및 사회성 발달 (분리불안, 또래 관계)</label>
                        <input type="checkbox" id="area-emotion" name="concernArea" value="감각/정서 조절 및 예민함" class="peer sr-only" /><label for="area-emotion" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition flex items-center"><i class="fa-solid fa-face-sad-tear mr-2 text-maljaram-primary"></i> 감각/정서 조절 및 예민함 (떼쓰기, 스트레스)</label>
                        <input type="checkbox" id="area-cognitive" name="concernArea" value="인지 및 학습 능력" class="peer sr-only" /><label for="area-cognitive" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition flex items-center"><i class="fa-solid fa-lightbulb mr-2 text-maljaram-primary"></i> 인지 및 학습 능력 (집중력, 과제 수행)</label>
                        <input type="checkbox" id="area-motor" name="concernArea" value="대/소근육 및 운동 발달" class="peer sr-only" /><label for="area-motor" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition flex items-center"><i class="fa-solid fa-person-running mr-2 text-maljaram-primary"></i> 대/소근육 및 운동 발달 (몸의 움직임, 미세 조작)</label>
                        <input type="checkbox" id="area-attention" name="concernArea" value="주의 집중 및 행동 조절" class="peer sr-only" /><label for="area-attention" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition flex items-center"><i class="fa-solid fa-hand-paper mr-2 text-maljaram-primary"></i> 주의 집중 및 행동 조절 (산만함, 충동적 행동)</label>
                    </div>
                </div>

                <!-- Q3: 자주 관찰되는 행동 (Checkbox) -->
                <div class="question-card">
                    <p class="text-lg font-bold mb-4 text-maljaram-primary">3. 아이에게서 **자주 관찰되는 행동**을 모두 선택해 주세요. <span class="text-red-500">*</span></p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <input type="checkbox" id="behavior-1" name="behavior" value="의사소통 어려움" class="peer sr-only" /><label for="behavior-1" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition">요구 사항을 말보다 몸짓으로 표현한다.</label>
                        <input type="checkbox" id="behavior-2" name="behavior" value="반복 행동" class="peer sr-only" /><label for="behavior-2" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition">특정 행동이나 말(반향어)을 반복하는 경향이 있다.</label>
                        <input type="checkbox" id="behavior-3" name="behavior" value="수용 언어 어려움" class="peer sr-only" /><label for="behavior-3" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition">부모의 지시나 질문을 잘 이해하지 못하는 것 같다.</label>
                        <input type="checkbox" id="behavior-4" name="behavior" value="감정 표현 어려움" class="peer sr-only" /><label for="behavior-4" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition">감정을 폭발적으로 표현하거나 떼를 쓰는 경우가 잦다.</label>
                        <input type="checkbox" id="behavior-5" name="behavior" value="사회적 상호작용 부족" class="peer sr-only" /><label for="behavior-5" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition">다른 아이들과 어울리거나 놀이를 시작하는 것을 어려워한다.</label>
                        <input type="checkbox" id="behavior-6" name="behavior" value="극심한 산만함" class="peer sr-only" /><label for="behavior-6" class="cursor-pointer block p-3 border-2 border-gray-300 rounded-lg transition">놀이/학습 시 10분 이상 집중하지 못하고 주의가 쉽게 흐트러진다.</label>
                    </div>
                </div>

                <!-- Q4: 감정 조절 및 강도 (Radio) -->
                <div class="question-card">
                    <p class="text-lg font-bold mb-4 text-maljaram-primary">4. 아이의 **감정 조절 능력**은 어떤 편인가요? <span class="text-red-500">*</span></p>
                    <div class="grid grid-cols-3 gap-3">
                        <input type="radio" id="emotion-low" name="emotionControl" value="낮음" class="peer sr-only" required /><label for="emotion-low" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">1. 조절 능력이 낮고 강도가 큼</label>
                        <input type="radio" id="emotion-mid" name="emotionControl" value="중간" class="peer sr-only" /><label for="emotion-mid" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">2. 때때로 스스로 진정시킨다.</label>
                        <input type="radio" id="emotion-high" name="emotionControl" value="높음" class="peer sr-only" /><label for="emotion-high" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">3. 감정을 잘 이해하고 표현한다.</label>
                    </div>
                </div>

                <!-- Q5: 부모님 우려 수준 (Radio) -->
                <div class="question-card">
                    <p class="text-lg font-bold mb-4 text-maljaram-primary">5. 현재 **부모님께서 느끼시는 우려의 수준**은 어느 정도인가요? <span class="text-red-500">*</span></p>
                    <div class="grid grid-cols-5 gap-2">
                        <input type="radio" id="worry-1" name="worryLevel" value="1" class="peer sr-only" required /><label for="worry-1" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">1 (거의 걱정 없음)</label>
                        <input type="radio" id="worry-2" name="worryLevel" value="2" class="peer sr-only" /><label for="worry-2" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">2</label>
                        <input type="radio" id="worry-3" name="worryLevel" value="3" class="peer sr-only" /><label for="worry-3" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">3 (보통)</label>
                        <input type="radio" id="worry-4" name="worryLevel" value="4" class="peer sr-only" /><label for="worry-4" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">4</label>
                        <input type="radio" id="worry-5" name="worryLevel" value="5" class="peer sr-only" /><label for="worry-5" class="cursor-pointer block text-center p-3 border-2 border-gray-300 rounded-lg transition">5 (매우 심각함)</label>
                    </div>
                </div>
                
                <button type="submit" class="w-full mt-6 py-4 text-xl font-bold rounded-xl text-white bg-maljaram-accent hover:bg-emerald-600 transition duration-300 shadow-xl">
                    테스트 결과 확인 및 1:1 상담 신청
                </button>
                <p id="error-message" class="text-red-500 text-center mt-4 hidden">모든 질문에 답하고, 우려 영역을 최소 1개 이상 선택해 주세요.</p>
            </form>

            <!-- Result Message Area (Hidden by default) -->
            <div id="result-message" class="hidden result-box bg-white p-8 rounded-xl shadow-2xl border-t-4 border-maljaram-primary text-center">
                <i class="fa-solid fa-clipboard-check text-6xl text-maljaram-primary mb-4"></i>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">진단 체크 완료!</h2>
                <p class="text-lg text-gray-700 mb-6" id="result-feedback"></p>
                
                <h3 class="text-xl font-bold text-maljaram-warning mb-4">📢 다음 단계 안내</h3>
                <p class="text-gray-600 mb-6">자가 진단 결과만으로는 최종 진단이 불가능합니다. 정확한 발달 로드맵 수립을 위해 전문가와의 비공개 상담을 추천드립니다.</p>
                
                <a href="/maljaram/contact.html" class="inline-flex justify-center items-center px-8 py-4 text-lg font-bold rounded-xl text-white bg-maljaram-accent hover:bg-emerald-600 transition duration-300 shadow-xl">
                    <i class="fa-solid fa-calendar-check mr-3"></i>
                    1:1 상담 예약 페이지로 이동
                </a>
            </div>

        </div>
    </main>

    <!-- JavaScript Logic -->
    <script>
        // Mobile Menu Toggle Logic (Index.html과 동일)
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIconOpen = document.getElementById('menu-icon-open');
        const menuIconClose = document.getElementById('menu-icon-close');

        mobileMenuButton.addEventListener('click', () => {
            const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true' || false;
            mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
            mobileMenu.classList.toggle('hidden');
            
            // Toggle icons
            menuIconOpen.classList.toggle('hidden');
            menuIconClose.classList.toggle('hidden');
        });

        // Assessment Logic
        function submitAssessment() {
            const form = document.getElementById('assessment-form');
            const resultMessage = document.getElementById('result-message');
            const errorDisplay = document.getElementById('error-message');
            const resultFeedback = document.getElementById('result-feedback');

            // 1. Validation Check (All radio groups must be checked, and at least one checkbox must be checked)
            const allRadiosChecked = document.querySelector('input[name="age"]:checked') &&
                                     document.querySelector('input[name="emotionControl"]:checked') &&
                                     document.querySelector('input[name="worryLevel"]:checked');
            
            const selectedConcerns = Array.from(document.querySelectorAll('input[name="concernArea"]:checked')).map(cb => cb.value);
            const selectedBehaviors = Array.from(document.querySelectorAll('input[name="behavior"]:checked')).map(cb => cb.value);
            
            const isConcernAreaChecked = selectedConcerns.length > 0;
            const isBehaviorChecked = selectedBehaviors.length > 0; // Q3도 체크했는지 확인

            if (!allRadiosChecked || !isConcernAreaChecked || !isBehaviorChecked) {
                errorDisplay.classList.remove('hidden');
                resultMessage.classList.add('hidden');
                // 스크롤을 맨 위로 이동
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return;
            } else {
                errorDisplay.classList.add('hidden');
            }

            // 2. Dynamic Feedback Generation
            let feedback = "고객님께서 체크하신 사항을 바탕으로 정리된 피드백입니다.<br><br>";
            
            // A. 우려 영역 피드백
            if (selectedConcerns.length > 0) {
                const concernString = selectedConcerns.join(', ');
                feedback += `<strong class="text-maljaram-primary">[주요 우려 영역]</strong> ${concernString}에 대한 주의 깊은 관찰이 필요합니다.<br>`;
            }

            // B. 행동/감정 피드백 (Worry Level과 연동)
            const worryLevel = parseInt(document.querySelector('input[name="worryLevel"]:checked').value);
            
            if (worryLevel >= 4) {
                feedback += `<strong class="text-red-500">[우려 수준 높음]</strong> 현재 느끼시는 불안감이 높은 단계입니다. 상담을 서둘러 주세요.<br>`;
            } else if (worryLevel >= 2) {
                feedback += `<strong class="text-maljaram-warning">[우려 수준 중간]</strong> 아이의 발달 단계를 명확히 확인하여 적극적인 조치가 필요한 시기입니다.<br>`;
            }

            // C. 연령별 권장 조치 (간단히)
            const ageGroup = document.querySelector('input[name="age"]:checked').value;
            if (ageGroup === '0-2' || ageGroup === '3-5') {
                feedback += `발달 **골든타임**인 영유아기이므로, 통합 발달 전문가와의 조기 진단이 특히 중요합니다.`;
            } else if (ageGroup === '6-8' || ageGroup === '9-12') {
                feedback += `학습 및 사회성에 영향을 미칠 수 있으므로, 학교생활과 연계한 치료 계획이 필요합니다.`;
            } else if (ageGroup === '13-19') {
                feedback += `청소년기는 심리적 안정과 소통이 중요합니다. 청소년 상담 전문가와의 깊이 있는 대화를 추천합니다.`;
            }

            // 3. Display Result
            resultFeedback.innerHTML = feedback;
            form.classList.add('hidden');
            resultMessage.classList.remove('hidden');

            // 스크롤을 결과 화면으로 이동
            resultMessage.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
